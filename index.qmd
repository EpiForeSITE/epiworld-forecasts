---
title: "Weekly COVID-19 Forecast for Utah"
date: last-modified
execute:
  echo: false
---

## Introduction

This COVID-19 forecast is published weekly.
Using case data published at the Utah DHHS [Coronavirus Dashboard](https://coronavirus.utah.gov/case-counts/), we calibrate an SIR connected model and simulate it with [epiworldR](https://github.com/UofUEpiBio/epiworldR) to generate the forecast.

The forecast was last updated on {{< meta date >}}.

## Overview of Observed Data
Utah DHHS publishes weekly surveillance data on their [Coronavirus Dashboard](https://coronavirus.utah.gov/case-counts/).
Below are the daily COVID-19 case counts from March 18, 2020 to {{< meta date >}}.
```{r}
# Grab and extract the zipped case data
## TODO: If we need to read multiple files,
## we need graceful failure if one file
## doesn't exist or isn't titled as expected
temp <- tempfile()
download.file(
  "https://coronavirus-dashboard.utah.gov/Utah_COVID19_data.zip",
  temp
)
datafile_name <- grep(
  "Trends_Epidemic+",
  unzip(temp, list = TRUE)$Name,
  ignore.case = TRUE,
  value = TRUE
)
datafile <- unz(temp, datafile_name)
data <- read.csv(datafile)
unlink(temp)

# Plot the observed data
plot(
  x = as.Date(data$Date),
  y = data$Daily.Cases,
  xlab = "Date",
  ylab = "Daily Cases",
  main = "Daily COVID-19 Cases in Utah")
```

## Epiworld Forecast
We calibrate a SIR Connected model using the above data and run the model in epiworldR.
Here are the results of a single model run:
```{r}
library(epiworldR)
model_sir <- ModelSIRCONN(
  name              = "COVID-19",
  n                 = 50000,
  prevalence        = 0.0001,
  contact_rate      = 2,
  transmission_rate = 0.5,
  recovery_rate     = 1 / 3
)

# Printing Model Summary
summary(model_sir)
```
